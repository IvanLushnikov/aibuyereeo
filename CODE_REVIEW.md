# –û—Ç—á–µ—Ç –æ —Ä–µ–≤—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

**–î–∞—Ç–∞:** 2025-01-27  
**–ü—Ä–æ–µ–∫—Ç:** Landing App - –ò–ò-–±–æ—Ç –¥–ª—è –≥–æ—Å–∑–∞–∫—É–ø–æ–∫  
**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** Next.js 16, React 19, TypeScript

---

## üìã –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ª–µ–Ω–¥–∏–Ω–≥ —Å —á–∞—Ç-–≤–∏–¥–∂–µ—Ç–æ–º –¥–ª—è –ø–æ–º–æ—â–∏ –≤ –ø–æ–¥–±–æ—Ä–µ –∫–æ–¥–æ–≤ –ö–¢–†–£ –¥–ª—è –≥–æ—Å–∑–∞–∫—É–ø–æ–∫. –ö–æ–¥ –≤ —Ü–µ–ª–æ–º –Ω–∞–ø–∏—Å–∞–Ω –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ, –Ω–æ –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏ –≤–∞–∂–Ω—ã—Ö –º–æ–º–µ–Ω—Ç–æ–≤, —Ç—Ä–µ–±—É—é—â–∏—Ö –≤–Ω–∏–º–∞–Ω–∏—è.

---

## üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. **–£—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏ –≤ Rate Limiting** (`chat/route.ts`)
**–ü—Ä–æ–±–ª–µ–º–∞:** Map `rateLimitStore` —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ –∏ –º–æ–∂–µ—Ç —Ä–∞—Å—Ç–∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ, –¥–∞–∂–µ —Å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–æ–π.

```typescript
const rateLimitStore = new Map<string, RateState>();
```

**–†–∏—Å–∫–∏:**
- –ü—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö `clientId` –ø–∞–º—è—Ç—å –±—É–¥–µ—Ç –ø–µ—Ä–µ–ø–æ–ª–Ω—è—Ç—å—Å—è
- –û—á–∏—Å—Ç–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Ä–∞–∑ –≤ —á–∞—Å –∏–ª–∏ –∫–∞–∂–¥—ã–µ 100 –∑–∞–ø—Ä–æ—Å–æ–≤
- –í production —ç—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø–∞–¥–µ–Ω–∏—é —Å–µ—Ä–≤–µ—Ä–∞

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Redis –∏–ª–∏ –¥—Ä—É–≥—É—é –≤–Ω–µ—à–Ω—é—é —Å–∏—Å—Ç–µ–º—É –¥–ª—è rate limiting
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å LRU cache —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º —Ä–∞–∑–º–µ—Ä–∞
- –î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–∑–º–µ—Ä–∞ Map

---

### 2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π `uuid`**
**–ü—Ä–æ–±–ª–µ–º–∞:** –í `chat-widget.tsx` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `uuid`, –Ω–æ –Ω–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–ª—É—á–∞—è, –∫–æ–≥–¥–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –º–æ–∂–µ—Ç –Ω–µ —Å—Ä–∞–±–æ—Ç–∞—Ç—å.

```typescript
const generated = uuid();
if (!generated || !generated.trim()) {
  // Fallback, –Ω–æ —ç—Ç–æ –Ω–µ –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å
}
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `uuid` –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤–∞–ª–∏–¥–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
- –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

---

### 3. **–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —É—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏ –≤ `setInterval`** (`chat/route.ts`)
**–ü—Ä–æ–±–ª–µ–º–∞:** `setInterval` –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –º–æ–¥—É–ª—è –∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –æ—á–∏—â–∞–µ—Ç—Å—è.

```typescript
setInterval(() => {
  cleanupRateLimitStore();
}, CLEANUP_INTERVAL_MS);
```

**–†–∏—Å–∫–∏:**
- –ü—Ä–∏ hot-reload –≤ dev —Ä–µ–∂–∏–º–µ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –º–Ω–æ–∂–µ—Å—Ç–≤–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤
- –í serverless –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º–æ–π

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –°–æ—Ö—Ä–∞–Ω—è—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª –∏ –æ—á–∏—â–∞—Ç—å –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è serverless

---

## üü° –í–∞–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 4. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–∞—â–∏—Ç—ã –æ—Ç XSS –≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º –≤–≤–æ–¥–µ**
**–ü—Ä–æ–±–ª–µ–º–∞:** –í `chat-widget.tsx` —Ñ—É–Ω–∫—Ü–∏—è `renderFormattedMessage` –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç markdown, –Ω–æ –Ω–µ —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç HTML –Ω–∞–ø—Ä—è–º—É—é.

**–¢–µ–∫—É—â–∞—è –∑–∞—â–∏—Ç–∞:**
- –ï—Å—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—è URL —á–µ—Ä–µ–∑ `isValidUrl` –∏ `sanitizeUrl`
- –ù–æ —Å–∞–º —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç—Å—è –ø–µ—Ä–µ–¥ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É —Ç–∏–ø–∞ `DOMPurify` –¥–ª—è —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏–∏
- –ò–ª–∏ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞—Ç—å HTML-—Å–∏–º–≤–æ–ª—ã –ø–µ—Ä–µ–¥ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º

---

### 5. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ `clientId`**
**–ü—Ä–æ–±–ª–µ–º–∞:** –õ–æ–≥–∏–∫–∞ `ensureClientId` –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è –≤ `chat-widget.tsx` –∏ `feedback-form.tsx`.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –í—ã–Ω–µ—Å—Ç–∏ –≤ –æ–±—â—É—é —É—Ç–∏–ª–∏—Ç—É `src/lib/client-id.ts`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–¥–∏–Ω—ã–π —Ö—É–∫ `useClientId()`

---

### 6. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ —Å–µ—Ç–∏ –≤ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ**
**–ü—Ä–æ–±–ª–µ–º–∞:** –í `chat-widget.tsx` —Ñ—É–Ω–∫—Ü–∏—è `trackEvent` –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –æ—à–∏–±–∫–∏, –Ω–æ –Ω–µ –ª–æ–≥–∏—Ä—É–µ—Ç –∏—Ö –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ.

```typescript
catch (error) {
  console.warn("analytics track error:", error);
}
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –î–æ–±–∞–≤–∏—Ç—å retry –ª–æ–≥–∏–∫—É –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—á–µ—Ä–µ–¥—å —Å–æ–±—ã—Ç–∏–π –¥–ª—è offline-—Ä–µ–∂–∏–º–∞

---

### 7. **–ü—Ä–æ–±–ª–µ–º–∞ —Å race condition –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —á–∞—Ç–∞**
**–ü—Ä–æ–±–ª–µ–º–∞:** –í `chat-widget.tsx` –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —á–∞—Ç–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏.

```typescript
if (newIsOpen && !hasInitialized && messages.length === 0 && !isThinking) {
  setHasInitialized(true);
  // ... –Ω–æ –º–µ–∂–¥—É –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –º–æ–∂–µ—Ç –ø—Ä–æ–π—Ç–∏ –≤—Ä–µ–º—è
}
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `useRef` –¥–ª—è —Ñ–ª–∞–≥–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- –î–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∑–∞—â–∏—Ç—É –æ—Ç –¥–≤–æ–π–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

---

### 8. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å—Ç–æ—Ä–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–∑–º–µ—Ä–∞.

```typescript
history: updatedHistory
  .map((m) => ({ role: m.role, content: m.content }))
  .slice(-10),
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Ä–∞–∑–º–µ—Ä–∞ –∫–∞–∂–¥–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
- –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –æ–±—â–∏–π —Ä–∞–∑–º–µ—Ä –∏—Å—Ç–æ—Ä–∏–∏ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π

---

## üü¢ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

### 9. **–¢–∏–ø–∏–∑–∞—Ü–∏—è**
- ‚úÖ –•–æ—Ä–æ—à–æ: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è TypeScript
- ‚ö†Ô∏è –ú–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å: –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–µ —Ç–∏–ø—ã –¥–ª—è API responses

### 10. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
- ‚úÖ –•–æ—Ä–æ—à–æ: –ï—Å—Ç—å fallback —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚ö†Ô∏è –ú–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å: –ë–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### 11. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
- ‚úÖ –•–æ—Ä–æ—à–æ: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `useMemo` –¥–ª—è `sessionId`
- ‚ö†Ô∏è –ú–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å: –ú–µ–º–æ–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ `renderFormattedMessage`

### 12. **–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å (a11y)**
- ‚úÖ –•–æ—Ä–æ—à–æ: –ï—Å—Ç—å `aria-label` –¥–ª—è –∏–Ω–ø—É—Ç–∞
- ‚ö†Ô∏è –ú–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å: –î–æ–±–∞–≤–∏—Ç—å ARIA-–∞—Ç—Ä–∏–±—É—Ç—ã –¥–ª—è –≤–∏–¥–∂–µ—Ç–∞ —á–∞—Ç–∞, keyboard navigation

### 13. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
- ‚úÖ –•–æ—Ä–æ—à–æ: –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ API routes
- ‚ö†Ô∏è –ú–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å: –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (JSON), —Ä–∞–∑–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –ª–æ–≥–æ–≤

### 14. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
- ‚úÖ –•–æ—Ä–æ—à–æ: Rate limiting, –≤–∞–ª–∏–¥–∞—Ü–∏—è URL
- ‚ö†Ô∏è –ú–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å: 
  - CSRF –∑–∞—â–∏—Ç–∞
  - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ payload
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö

### 15. **–°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ async —Ñ—É–Ω–∫—Ü–∏—è—Ö**
**–ü—Ä–æ–±–ª–µ–º–∞:** –í `log-service.ts` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `appendFileSync`, —á—Ç–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç event loop.

```typescript
appendFileSync(filePath, line, { encoding: "utf-8" });
```

**–†–∏—Å–∫–∏:**
- –ë–ª–æ–∫–∏—Ä—É–µ—Ç Node.js event loop
- –ú–æ–∂–µ—Ç –∑–∞–º–µ–¥–ª–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `fs/promises.appendFile` –≤–º–µ—Å—Ç–æ `appendFileSync`
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—á–µ—Ä–µ–¥—å –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –∑–∞–ø–∏—Å–∏

### 16. **–ò–∑–±—ã—Ç–æ—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ production**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–Ω–æ–≥–æ `console.log` –∏ `console.error` –≤ –∫–æ–¥–µ, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –≤ production.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (winston, pino)
- –†–∞–∑–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è dev/prod
- –£–±—Ä–∞—Ç—å debug –ª–æ–≥–∏ –∏–∑ production

### 17. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ localStorage**
**–ü—Ä–æ–±–ª–µ–º–∞:** –í `chat-widget.tsx` –∏ `feedback-form.tsx` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `localStorage` –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å.

**–†–∏—Å–∫–∏:**
- –í private mode –±—Ä–∞—É–∑–µ—Ä–∞ `localStorage` –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- –í—ã–∑–æ–≤–µ—Ç –æ—à–∏–±–∫—É –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∑–∞–ø–∏—Å–∏

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –î–æ–±–∞–≤–∏—Ç—å try-catch –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å localStorage
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å fallback (cookie –∏–ª–∏ memory storage)

---

## üìä –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### `chat-widget.tsx`
**–û—Ü–µ–Ω–∫–∞: 7/10**

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- –•–æ—Ä–æ—à–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–º–µ–Ω—ã –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ `AbortController`
- –ó–∞—â–∏—Ç–∞ –æ—Ç –¥–≤–æ–π–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π markdown –∏ —Å—Å—ã–ª–æ–∫

**–°–ª–∞–±—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- –°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ `renderFormattedMessage` - –º–æ–∂–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ —Å `feedback-form.tsx` –¥–ª—è `clientId`
- –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–ª—É—á–∞—è, –∫–æ–≥–¥–∞ localStorage –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (private mode)

---

### `chat/route.ts`
**–û—Ü–µ–Ω–∫–∞: 8/10**

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- –•–æ—Ä–æ—à–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–∞–π–º–∞—É—Ç–æ–≤
- Rate limiting

**–°–ª–∞–±—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- –£—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏ –≤ `rateLimitStore`
- `setInterval` –Ω–∞ —É—Ä–æ–≤–Ω–µ –º–æ–¥—É–ª—è
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ `isTimeout` –∏ `isAbort` (–æ–±–∞ –ø—Ä–æ–≤–µ—Ä—è—é—Ç `AbortError`)

---

### `analytics/route.ts`
**–û—Ü–µ–Ω–∫–∞: 9/10**

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π —á–µ—Ä–µ–∑ whitelist
- –•–æ—Ä–æ—à–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –ì–∏–±–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ payload

**–°–ª–∞–±—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å rate limiting –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞ payload

---

### `log-service.ts`
**–û—Ü–µ–Ω–∫–∞: 6/10**

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- –ü—Ä–æ—Å—Ç–∞—è –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –ø–æ –¥–∞—Ç–∞–º
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

**–°–ª–∞–±—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- ‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ù–û:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `appendFileSync` (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π) –±–ª–æ–∫–∏—Ä—É–µ—Ç event loop
- –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –∑–∞–ø–∏—Å–∏
- –ù–µ—Ç —Ä–æ—Ç–∞—Ü–∏–∏ –ª–æ–≥–æ–≤
- –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –∑–∞–ø–∏—Å–∏

---

### `feedback-form.tsx`
**–û—Ü–µ–Ω–∫–∞: 7/10**

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- –ü—Ä–æ—Å—Ç–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- –•–æ—Ä–æ—à–∏–π UX —Å —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏

**–°–ª–∞–±—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ `clientId`
- –ù–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ email –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
- –ù–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç —Å–ø–∞–º–∞ (reCAPTCHA –∏–ª–∏ rate limiting)

---

## üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
1. ‚úÖ –ò—Å–ø—Ä–∞–≤–∏—Ç—å —É—Ç–µ—á–∫—É –ø–∞–º—è—Ç–∏ –≤ rate limiting (Redis –∏–ª–∏ LRU cache)
2. ‚úÖ **–ó–∞–º–µ–Ω–∏—Ç—å `appendFileSync` –Ω–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –∑–∞–ø–∏—Å—å** –≤ `log-service.ts`
3. ‚úÖ –í—ã–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É `clientId` –≤ –æ–±—â—É—é —É—Ç–∏–ª–∏—Ç—É
4. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –∑–∞—â–∏—Ç—É –æ—Ç XSS –≤ `renderFormattedMessage`
5. ‚úÖ –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å `setInterval` –≤ serverless –æ–∫—Ä—É–∂–µ–Ω–∏–∏
6. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ localStorage

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
7. ‚úÖ –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ —Å–µ—Ç–∏ –≤ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ
8. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é —Ä–∞–∑–º–µ—Ä–∞ –∏—Å—Ç–æ—Ä–∏–∏ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
9. ‚úÖ –ò—Å–ø—Ä–∞–≤–∏—Ç—å race condition –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —á–∞—Ç–∞
10. ‚úÖ –ó–∞–º–µ–Ω–∏—Ç—å console.log –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
11. ‚úÖ –£–ª—É—á—à–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å (ARIA –∞—Ç—Ä–∏–±—É—Ç—ã)
12. ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å `renderFormattedMessage` (–º–µ–º–æ–∏–∑–∞—Ü–∏—è)
13. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –∑–∞—â–∏—Ç—É –æ—Ç —Å–ø–∞–º–∞ –≤ feedback form
14. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ payload –≤ analytics

---

## üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚ùå –ù–µ –≤–∏–¥–Ω–æ unit —Ç–µ—Å—Ç–æ–≤
- ‚ùå –ù–µ –≤–∏–¥–Ω–æ integration —Ç–µ—Å—Ç–æ–≤
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚ö†Ô∏è –ù–µ—Ç README —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
- ‚ö†Ô∏è –ù–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –î–æ–±–∞–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- ‚ö†Ô∏è –ù–µ—Ç —è–≤–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –æ—à–∏–±–æ–∫ (Sentry, etc.)
- ‚ö†Ô∏è –ù–µ—Ç –º–µ—Ç—Ä–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

---

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ —Ö–æ—Ä–æ—à–æ

1. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ API routes
2. **–¢–∏–ø–∏–∑–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ TypeScript –ø–æ–≤—ã—à–∞–µ—Ç –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å
3. **UX:** –•–æ—Ä–æ—à–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ—à–∏–±–æ–∫
4. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –ë–∞–∑–æ–≤–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ rate limiting
5. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

---

## üìà –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞

**–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞: 7.5/10**

–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º:
- –£—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏ –≤ rate limiting
- **–ë–ª–æ–∫–∏—Ä—É—é—â–∏–π —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π I/O –≤ log-service**
- –£–ª—É—á—à–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

–ö–æ–¥ –Ω–∞–ø–∏—Å–∞–Ω –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ, –Ω–æ –µ—Å—Ç—å –º–µ—Å—Ç–∞ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏ —É–ª—É—á—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

---

## üîç –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ—Ç–∞–ª–∏

### –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –≤ –∫–æ–¥–µ

#### 1. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ `AbortError` –≤ `chat/route.ts`
```typescript
const isTimeout = error instanceof Error && error.name === "AbortError";
const isAbort = error instanceof Error && error.name === "AbortError";
```
–û–±–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ. –ù—É–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –æ–¥–Ω—É.

#### 2. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –∑–∞–ø–∏—Å–∏ –≤ –ª–æ–≥–∏
–í `log-service.ts` –Ω–µ—Ç try-catch –¥–ª—è `appendFileSync`, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø–∞–¥–µ–Ω–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –¥–∏—Å–∫–æ–º.

#### 3. –ù–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ payload –≤ analytics
–í `analytics/route.ts` payload –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø—Ä–æ–±–ª–µ–º–∞–º —Å –ø–∞–º—è—Ç—å—é.

#### 4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `void` –¥–ª—è trackEvent
–í `chat-widget.tsx` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `void trackEvent(...)`, —á—Ç–æ —Å–∫—Ä—ã–≤–∞–µ—Ç –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏. –õ—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `.catch()` –¥–ª—è —è–≤–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏.

---

## üìù –†–µ–∑—é–º–µ

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- –•–æ—Ä–æ—à–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- –•–æ—Ä–æ—à–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∑–∞–≥—Ä—É–∑–∫–∏
- –ë–∞–∑–æ–≤–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (rate limiting, –≤–∞–ª–∏–¥–∞—Ü–∏—è)

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:** ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–´**
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π I/O –±–ª–æ–∫–∏—Ä—É–µ—Ç event loop - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ (–∑–∞–º–µ–Ω–µ–Ω –Ω–∞ async)
- ‚úÖ –£—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏ –≤ rate limiting - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ (–¥–æ–±–∞–≤–ª–µ–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ Map)
- ‚úÖ –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ localStorage - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ (–¥–æ–±–∞–≤–ª–µ–Ω fallback)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:** ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û**
1. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–ø–∏—Å—å –≤ –ª–æ–≥-—Ñ–∞–π–ª - —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è async appendFile
2. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ Map –¥–ª—è rate limiting (–º–æ–∂–Ω–æ –ø–æ–∑–∂–µ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ Redis)
3. ‚úÖ –í—ã–Ω–µ—Å–µ–Ω–∞ –æ–±—â–∞—è –ª–æ–≥–∏–∫–∞ clientId –≤ —É—Ç–∏–ª–∏—Ç—É `src/lib/client-id.ts`
4. ‚ö†Ô∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ - –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∂–µ (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)
5. ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ - –¥–æ–±–∞–≤–ª–µ–Ω—ã try-catch –≤–µ–∑–¥–µ, –≥–¥–µ –Ω—É–∂–Ω–æ

**–°—Ç–∞—Ç—É—Å:** –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏ –≤–∞–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã. –ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É.

