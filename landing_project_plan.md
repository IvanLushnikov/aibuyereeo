### План разработки лендинга с AI-агентом КТРУ

#### ✅ Этап 1. Подготовка контента и позиционирование (выполнено)
- Собрать ключевые инсайты из кастдева и сформулировать УТП.
- Согласовать название агента, tone of voice и стиль визуала («стильно, модно, молодежно»).
- Подготовить текстовые блоки: хедер, выгоды для ролей, сценарий работы, FAQ, CTA.
- Подготовить структуру формы обратной связи и вопросы для пользовательских цитат.

#### ✅ Этап 2. Проектирование архитектуры и интеграций (выполнено)
- Определить схемы API `/api/chat` и `/api/analytics`, формат запросов/ответов.
- Спроектировать хранение событий и диалогов на Render Disk (структура файлов, ротация, бэкапы).
- Описать конфигурацию n8n: webhook trigger, маршрутизация сообщений к AI Agent, логирование.
- Спланировать модели данных и метаданные (clientId, тайминги, статусы).

#### ✅ Этап 3. Дизайн-концепция и прототипирование (выполнено)
- Создать вайрфрейм/макет лендинга с ключевыми блоками и интерактивами.
- Отрисовать стиль: градиентные фоны, стеклянные карточки, анимации CTA.
- Спроектировать UI чата (кнопка запуска, окно диалогов, состояния ожидания/ошибок).
- Продумать адаптивность и основные breakpoints.

#### ✅ Этап 4. Реализация фронтенда (выполнено)
- Развернуть проект на Next.js 14 + Tailwind CSS, настроить структуру компонентов.
- Сверстать разделы лендинга, подключить анимации и интерактивные элементы.
- Реализовать форму обратной связи с валидацией и состоянием «отправлено».
- Настроить управление состоянием чата и генерацию `clientId`.

#### ✅ Этап 5. Интеграция с n8n и аналитика (выполнено)
- Реализовать API-роут `/api/chat` и подключить его к n8n webhook с защитой по секрету.
- Настроить `/api/analytics` для записи событий и сообщений в CSV-файлы на Render Disk.
- В n8n добавить ветки логирования, обработку таймаутов иfallback-сообщений.
- Проверить корректность передачи метаданных и соответствие форматов.

#### ✅ Этап 6. Тестирование и качество (смоук-тесты выполнены, e2e после подключения n8n)
- Написать чек-лист e2e: отправка сообщения, получение ответа, запись логов.
- Провести нагрузочные прогоны (несколько одновременных сессий чата).
- Проверить аналитические события и целостность CSV-файлов.
- Собрать обратную связь, внести правки по UX/контенту.

#### ✅ Этап 7. Деплой и сопровождение (чек-лист и health-check готов)
- Настроить деплой на Render: переменные окружения, Render Disk, health-check.
- Подключить домен и HTTPS, проверить работу вебхука и формы в проде.
- Настроить крон/скрипты бэкапов CSV в внешнее хранилище.
- Подготовить документацию и план мониторинга (алерты, проверка логов).

