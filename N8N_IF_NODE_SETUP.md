# Настройка IF ноды в n8n для блокировки пустых заявок

## Шаг 1: Добавь IF ноду

1. Найди workflow который отправляет "Новая заявка с лендинга"
2. Добавь ноду **"IF"** перед нодой "Send Message to Telegram"
3. Подключи IF ноду к предыдущей ноде (откуда приходят данные)

## Шаг 2: Настрой условие

В IF ноде:

1. **Conditions** → **Add condition**
2. Выбери **"Expression"** (не Fixed!)
3. В поле условия введи:

```
{{ $json.body.name }} !== "-" && {{ $json.body.name }} !== "" && {{ $json.body.email }} !== "-" && {{ $json.body.email }} !== ""
```

**ИЛИ если данные приходят напрямую (без body):**

```
{{ $json.name }} !== "-" && {{ $json.name }} !== "" && {{ $json.email }} !== "-" && {{ $json.email }} !== ""
```

## Шаг 3: Подключи выходы

1. **TRUE** выход → подключи к "Send Message to Telegram" (отправка заявки)
2. **FALSE** выход → НЕ подключай никуда (или подключи к ноде логирования, если нужна)

## Как проверить какая структура данных

1. Запусти workflow вручную
2. Посмотри что приходит в INPUT ноды IF
3. Если видишь `body.name` и `body.email` → используй первый вариант
4. Если видишь просто `name` и `email` → используй второй вариант

## Альтернативный вариант (проще)

Если не работает выражение выше, используй два отдельных условия:

**Условие 1:**
- Field: `{{ $json.body.name }}` (или `{{ $json.name }}`)
- Operation: "is not empty"
- Value: (оставь пустым)

**Условие 2:**
- Field: `{{ $json.body.email }}` (или `{{ $json.email }}`)
- Operation: "is not empty"  
- Value: (оставь пустым)

**Combine with:** AND

